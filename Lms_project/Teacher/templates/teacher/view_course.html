{% extends 'base.html' %}
{% block title %}View Courses{% endblock %}
{% block content %}
{% include 'teacher/_sidebar.html' %}

    <div class="main-content" style="margin-left:200px; padding:35px; background:#f4f8fb; min-height:100vh;">

  <!-- Go Back Button -->
  <a href="javascript:history.back()" class="btn btn-outline-danger mb-3 d-inline-block">
    <i class="fas fa-arrow-left"></i> Go Back
  </a>
  
  <div class="container-fluid mt-4">
    <h3 class="text-center mb-4">
      <i class="fa-solid fa-book-open text-dark me-2"></i> Your Courses
    </h3>

    {% if courses %}
    <div class="row g-4">
  {% for course in courses %}
  <div class="col-lg-6 col-md-6 col-sm-12 d-flex"> <!-- changed col-lg-4 to col-lg-6 -->
    <div class="card shadow-sm border-0 h-100 w-100 border-radius-25">
      
      <!-- Image at the top -->
      <div class="ratio ratio-16x9">
        <img src="{{ enrollment.course.image.url }}" class="card-img-top" alt="{{ course.title }}">
      </div>

      <div class="card-body d-flex flex-column">
        <h5 class="card-title text-dark">
          <i class="fa-solid fa-graduation-cap me-2"></i>{{ course.title }}
        </h5>
        <p class="card-text text-secondary">
          {{ course.description|truncatewords:20 }}
        </p>

        <div class="mt-auto">
          <a href="{% url 'teacher:course_detail' course.id %}" class="btn btn-outline-dark w-100">
            <i class="fa-solid fa-eye me-1"></i> View Details
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>


    {% else %}
    <div class="text-center text-muted mt-5">
      <i class="fa-solid fa-circle-info fa-2x mb-2"></i>
      <p>No courses available.</p>
    </div>
    {% endif %}
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.createElement("button");
    btn.id = "mobileSidebarToggle";
    btn.innerHTML = "â˜°";
    document.body.appendChild(btn);
    const sidebar = document.getElementById("sidebar");

    btn.addEventListener("click", function (e) {
        e.stopPropagation();
        sidebar.classList.add("mobile-active");
        btn.style.display = "none";
    });

    document.addEventListener("click", function (e) {
        if (sidebar.classList.contains("mobile-active")) {
            if (!sidebar.contains(e.target)) {
                sidebar.classList.remove("mobile-active");
                btn.style.display = "block";
            }
        }
    });
});
</script>
{% endblock %}
